"0","dystopia_characters <- read.csv(""dystopia_entities_clean.csv"")[c(-1)] %>%"
"0","  filter(kind==""person"")"
"0",""
"0","dystopia_total <- read.csv(""dystopia_entities_sentiments_clean.csv"")"
"0",""
"0","authors <- dystopia_characters %>%"
"0","  distinct(author)"
"0",""
"0","vertices <- c()"
"0","edgeList <- c()"
"0",""
"0",""
"0",""
"0","for (i in seq_along(authors[,1])) {"
"0","  author <- authors[i,1]"
"0","  author_characters <- filter(dystopia_total, author==authors[i,]) "
"0","  "
"0",""
"0","  vertices <- append(vertices, as.vector(author_characters$entity))"
"0","  "
"0","  for (j in seq_along(author_characters)) {"
"0","    edgeList <- append(edgeList, c(author, author_characters[j, 4]))"
"0","    "
"0","    if (is.na(edgeList[length(edgeList)])) {"
"0","      edgeList <- head(edgeList, -2)"
"0","    }"
"0","    else {"
"0","      if(author_characters[j, 7] == ""m"")"
"0","        colors <- append(colors, c(""#AAAAAA"", ""#0000FF""))"
"0","      else"
"0","        colors <- append(colors, c(""#AAAAAA"", ""#FFB6C1""))"
"0","    }"
"0","  }"
"0","  "
"0","}"
"0",""
"0",""
"0","edgeList <- edgeList[!is.na(edgeList)]"
"0","make_graph(edges=edgeList)"
"1","IGRAPH 3d4e4d6 DN-- 35 30 -- "
"1",""
"1","
"
"1","+ attr: name (v/c)"
"1","
"
"1","+ edges from 3d4e4d6 (vertex names):
"
"1",""
"1",""
"1"," [1] Bradbury, Ray     ->Albert Schweitzer Bradbury, Ray     ->Aunt Maude        Bradbury, Ray     ->Beatty           "
"1","
"
"1"," [4] Bradbury, Ray     ->Bob               Bradbury, Ray     ->Byron             Bradbury, Ray     ->Clarisse Dove    "
"1","
"
"1"," [7] Bradbury, Ray     ->Faber             Rand, Ayn         ->Equality          Rand, Ayn         ->Liberty          "
"1","
"
"1","[10] Atwood, Margaret  ->Adam              Atwood, Margaret  ->Alma              Atwood, Margaret  ->Angela           "
"1","
"
"1","[13] Atwood, Margaret  ->Aunt Helena       Atwood, Margaret  ->Aunt Lydia        Atwood, Margaret  ->Elizabeth        "
"1","
"
"1","[16] Atwood, Margaret  ->Janine            Le Guin, Ursula K.->Benton            Le Guin, Ursula K.->Captain Susun    "
"1","
"
"1","[19] Le Guin, Ursula K.->Coro Mena         Le Guin, Ursula K.->Don               Le Guin, Ursula K.->Ebor Dendep.     "
"1","
"
"1","[22] Le Guin, Ursula K.->Gosse             Le Guin, Ursula K.->Kees              Orwell, George    ->Charringtons     "
"1","
"
"1",""
"1",""
"1",""
"1","+ ... omitted several edges
"
"1",""
"0","newgraph <- graph(edgeList, directed=FALSE)"
"0",""
"0","colors <- c()"
"0","agg_sentiment <- c()"
"0","for (i in seq_along(V(newgraph)$name)) {"
"0","  character_gender <- dystopia_total %>%"
"0","    filter(entity == V(newgraph)$name[i])"
"0","  if (length(character_gender[, 1]) == 0)"
"0","    colors <- append(colors, ""#000000"")"
"0","  else if(character_gender[1, ""gender""] == ""m"")"
"0","    colors <- append(colors, ""#0000FF"")"
"0","  else "
"0","    colors <- append(colors, ""#D90166"")"
"0","  "
"0","  "
"0","  if (length(character_gender[, 1]) == 0)"
"0","    agg_sentiment <- append(agg_sentiment, ""#AAAAAA"")"
"0","  else if(character_gender[1, ""total""] < 0)"
"0","    agg_sentiment <- append(agg_sentiment, ""#FFFCBB"")"
"0","  else "
"0","    agg_sentiment <- append(agg_sentiment, ""#FF7F7F"")"
"0","  "
"0","}"
"0",""
"0",""
"0",""
"0",""
"0",""
